!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(e="undefined"!=typeof globalThis?globalThis:e||self).RecipeJS=r()}(this,(function(){"use strict";const e={EMPTY:" is null or empty.",NULL:" is null.",UNDEFINED:" is undefined.",validateInRange(e,r,t,o){if(this.validateIsNumber(e,r),r<t||o<r)throw console.error((new Error).stack),new Error(`${e} is out of range [${t}, ${o}]: ${r}`)},validateIsArray(e,r){if(!Array.isArray(r))throw console.error((new Error).stack),new Error(`${e} is not an array: ${r}`)},validateIsBoolean(e,r){if("boolean"!=typeof r)throw console.error((new Error).stack),new Error(`${e} is not a boolean: ${r}`)},validateIsFunction(e,r){if("function"!=typeof r)throw console.error((new Error).stack),new Error(`${e} is not a function: ${r}`)},validateIsNumber(e,r){if("number"!=typeof r)throw console.error((new Error).stack),new Error(`${e} is not a number: ${r}`)},validateIsString(e,r){if("string"!=typeof r)throw console.error((new Error).stack),new Error(`${e} is not a string: ${r}`)},validateNotEmpty(r,t){if(Array.isArray(t)){if(0===t.length)throw console.error((new Error).stack),new Error(r+e.EMPTY)}else if(!Number.isNaN(parseFloat(t))&&Number.isFinite(t));else if(!0===t||!1===t);else if(!t)throw console.error((new Error).stack),new Error(r+e.EMPTY)},validateNotIncludesNil(e,r){this.validateNotNil(e,r),this.validateIsArray(e,r),r.forEach((r=>{this.validateNotNil(`${e} element`,r)}))},validateNotNil(r,t){if(void 0===t)throw console.error((new Error).stack),new Error(r+e.UNDEFINED);if(null===t)throw console.error((new Error).stack),new Error(r+e.NULL)}},r={create:({amount:r=1,resourceKey:t,clientProps:o={}})=>(e.validateIsString("resourceKey",t),Immutable({amount:r,resourceKey:t,clientProps:o}))};Object.freeze(r);const t={create:({inputs:r,key:t,name:o,outputs:a,clientProps:i={}})=>{e.validateIsArray("inputs",r),e.validateIsString("name",o),e.validateIsArray("outputs",a);return Immutable({inputs:r,key:t||o,name:o,outputs:a,clientProps:i})}};Object.freeze(t);const o={create:({imageUrl:r,key:t,name:o,value:a=0,clientProps:i={}})=>{e.validateIsString("name",o);return Immutable({imageUrl:r,key:t||o,name:o,value:a,clientProps:i})}};Object.freeze(o);const a={};a.toString=(r,t)=>{if(e.validateNotNil("ingredientData",r),e.validateNotNil("resolver",t),Array.isArray(r))return((e,r)=>{const t=R.reduce(((e,t)=>`${e}${a.toString(t,r)} + `),"",e);return t.substring(0,t.length-" + ".length)})(r,t);const{amount:o,resourceKey:i}=r,n=t.resourceData(i);return R.isNil(n)||R.isNil(o)?null:`${n.name} x${o}`},a.value=(r,t)=>{if(e.validateNotNil("ingredientData",r),e.validateNotNil("resolver",t),Array.isArray(r))return((e,r)=>R.reduce(((e,t)=>e+a.value(t,r)),0,e))(r,t);const{amount:o,resourceKey:i}=r,n=t.resourceData(i),l=R.isNil(n)?0:n.value;return R.isNil(l)||R.isNil(o)?null:l*o};const i={accept:(e,r)=>r.visit(e),findByOutput:(r,t)=>{e.validateIsString("resourceKey",r),e.validateNotNil("resolver",t);const o=e=>e.resourceKey===r;return R.reduce(((e,r)=>R.filter(o,r.outputs).length>0?R.append(r,e):e),[],t.recipeValues())},inputValue:(r,t)=>{e.validateNotNil("recipeData",r),e.validateNotNil("resolver",t);return R.reduce(((e,r)=>{const o=a.value(r,t);return o?e+o:e}),0,r.inputs)},outputInputRatio:(r,t)=>{e.validateNotNil("recipeData",r),e.validateNotNil("resolver",t);const o=i.outputValue(r,t),a=i.inputValue(r,t);return o&&a?o/a:null},outputValue:(r,t)=>{e.validateNotNil("recipeData",r),e.validateNotNil("resolver",t);return R.reduce(((e,r)=>{const o=a.value(r,t);return o?e+o:e}),0,r.outputs)},toString:(r,t,o)=>{e.validateNotNil("recipeData",r),e.validateNotNil("resolver",t);const{inputs:i,name:n,outputs:l}=r;return`${o&&n?`${n}: `:""}${a.toString(l,t)} ← ${a.toString(i,t)}`}},n={toString:r=>(e.validateNotNil("resourceData",r),r.name)};class l{}return l.InputValidator=e,l.IngredientData=r,l.RecipeData=t,l.ResourceData=o,l.IngredientFunction=a,l.RecipeFunction=i,l.ResourceFunction=n,l}));
